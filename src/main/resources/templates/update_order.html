<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{page_layout/layout}">
<head>
    <meta charset="UTF-8">
    <title>Update Order</title>
</head>
<section layout:fragment="main-content">
    <div class="row justify-content-center">
        <form th:action="@{'/order/restaurant/'+ ${order_id}+ '/update'}"  th:object="${order}" method="POST">
            <table class="table">
                <thead>
                <tr>
                    <th>#Order Id</th>
                    <th>Name Of The Restaurant</th>
                    <th>Status Of The Order</th>
                    <th>Date Issued</th>
                    <th>Full Name Of The Customer</th>
                    <th>Address</th>
                    <th>List of Products</th>
                    <th>Next Status Of The Order</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td th:text="${order.getOrder_id()}"></td>
                    <input type="hidden" th:field="*{order_id}">

                    <td th:text="${order.getRestaurant().getRestName()}"></td>
                    <input type="hidden" th:field="*{restaurant.restName}">

                    <td th:text="${order.getOrderStatus()}"></td>
                    <td th:text="${order.getOrder_Created_Time()}"></td>
                    <input type="hidden" th:field="*{order_Created_Time}">

                    <td th:text="${order.getPerson_order().getName() + ' ' + order.getPerson_order().getSurname()}"></td>
                    <input type="hidden" th:field="*{person_order.name}">
                    <input type="hidden" th:field="*{person_order.surname}">

                    <td th:text="${order.getPerson_order().getAddress()}"></td>
                    <input type="hidden" th:field="*{person_order.address}">

                    <input type="hidden" th:field="*{person_order}">
                    <input type="hidden" th:field="*{restaurant}">

                    <td>
                        <ol>
                            <li th:each="op,i : ${order.order_placement}">
                                <div th:if="${op.getProduct()} != null">
                                    <span th:text="${op.getQuantity()}"></span>X
                                    <input type="hidden" th:field="*{order_placement[__${i.index}__].id}">
                                    <input type="hidden" th:field="*{order_placement[__${i.index}__].product}">
                                    <input type="hidden" th:field="*{order_placement[__${i.index}__].quantity}">
                                    <span th:text="${op.getProduct().getName()}"></span>
                                </div>
                            </li>
                        </ol>
                    </td>
                    <td>
                        <div th:if="${order.orderStatus} != ${status}">
                            <select id="type" class="form-control" th:field="*{orderStatus}" required>
                                <option th:text="${status}" th:value="${status}"></option>
                            </select>
                        </div>
                        <div th:if="${order.orderStatus} == ${status}">
                            <button type="submit" disabled class="btn-success">Already Completed</button>
                        </div>
                    </td>
                    <td>
                        <div th:if="${order.orderStatus} != ${status}">
                            <button type="submit" class="btn-success">Update</button>
                        </div>
                        <div th:if="${order.orderStatus} == ${status}">
                            <button type="submit" class="btn-dark" disabled>No Action To Do for this Order</button>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </form>
    </div>
    <div th:if="${order} == null">
        <p style="color:red;font-size: x-large">No Orders found Just Yet.</p>
    </div>
</section>
</html>